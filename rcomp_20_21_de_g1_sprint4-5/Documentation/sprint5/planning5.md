RCOMP 2020-2021 Project - Sprint 5 planning===========================================# 1. Sprint's backlog #Melhorar e corrigir as decisões do Sprint anterior, de forma a que a implementação do Sprint 4 esta desenvolvida de forma correta e que permita deste modo, a implementação deste Sprint.O protocolo deverá ser melhorado.A quantidade de mensagens enviadas pelo cliente irá ser aumentada.Possibilidade de enviar ficheiros em vez de apenas ser possivel enviar mensagens.Conclusão de US's.As comunicações através do protocolo SPD2021 terão de ser protegidas através de SSL/TLS com autenticação mútua através de certificados de chave pública.Pela complexidade do protocolo TLS e falta de https escolhemos o protocolo SSL, que iremos implementar em todas as US como pretendido.# 2. Decisões técnicas e coordenação ### Informações #####REGRAS:* Transação dados entre aplicações: mensagem pedido <-> mensagem de resposta* Protocolo: TCP (Transmission Control Protocol)* Tipo de ligação: TCP (modelo cliente-servidor), cliente é o q toma a iniciativa de estabelecer a ligação* Porta de ligação(TCP): 32507* Quando a ligação está estabelecida o cliente mantém a iniciativa de enviar pedidos e o servidor apenas responde================================================================###Estrutura da mensagem:####Versão:* Posição: 0* Tamanho: 1 byte (inteiro de 0 a 255)* Versão: SDP2021* Descrição: A primeira versão é a 0!* Garantir a compatibilidade entre aplicações####Codigo:* Posição: 1* Tamanho: 1 byte (inteiro de 0 a 255)* Descrição: Indentifica o tipo de pedido ou resposta####Número de Bytes:* Posição: 2* Tamanho: 1 byte (inteiro de 0 a 255)* Descrição: Numero de bytes transportados no campo "DADOS"* Se o valor for 0, o campo "DADOS" não existe####Dados:* Posição:3* Tamanho: Variavel (depende do campo "Número de bytes")* Descrição: Dados para serem manuseados pelas aplicações finais================================================================###Códigos do Protocolo:Códigos de tipo de pedido ou resposta na versão zero do protocolo SDP2021####Código: 0* Significado: "Teste"- Pedido de teste*  Nao transporta dados*  Recebe uma resposta do tipo 2 (Entendido)####Código: 1* Significado: "Fim" - Pedido de fim de ligação* Deve receber uma resposta tipo 2 (Entendido)* Ligação TCP é fechada####Código: 2* Significado: "Entendido" - Resposta vazia (não transporta dados)* Normalmente usada para codigos 0 e 1, mas pode ser usadas em outros codigos####Código: 255* Significado: "Segmento" - Usada para enviar ou pedir dados com mais de 255 bytes* Implementação:* Por exemplo, para enviar um pedido ou resposta com código XXX transportando um conteúdo de 400 bytes:* 1º - É enviada uma mensagem com código 255 contendo os primeiros 255 bytes.* 2º - É enviada uma mensagem com código XXX contendo os restantes 145 bytes.Devem ser definidos novos códigos, correspondentes a novos tipos de pedidos e respostas que se tornarãonecessários quando o SDP2021 for usado no contexto das várias aplicações que se descrevem a seguir:================================================================###Descrição do sistema* Objetivo:- Enviar ficheiros para um conjunto de ALOJADORES(cada um com destino diferente)- Os ficheiros são todos enviados para o mesmo CENTRO DE DISTRIBUIÇÃO.- CENTRO DE DISTRIBUIÇÃO ---> ALOJADOR DISPONIVEL- ALOJADOR DISPONIVEL: depende da disponibilidade que é monitorizada pelo CENTRO DE DISTRIBUIÇÃO###Aplicações a desenvolver* Alojadores- Recebem ficheiros da aplicação Centro de Distribuição(implementam SDP2021)- Os ficheiros sao guardados numa pasta local- Capaz de receber simultaneamente diferentes ficheiros do CDD(Centro de Distribuição)- Ao arrancar, conhece o endereço IP ou nome de DNS do nó de rede que se encontra o CDD(Centro de Distribuição)- Assume então o papel de cilente SDP2021 e contacta o CDD com o objetivo de informar da sua disponibilidade* Centro de Distribuição (CDD)- O CDD gere uma lista de ALOJADORES disponiveis- Quando um ALOJADORES contacta o CDD é acrescentado à lista(SE NÃO EXISTIR) e registado como disponível.- Quando o CDD tenta contactar um ALOJADOR para enviar um ficheiro e falha O ALOJADOR passa para indisponivel, então vai ter que enviar para outro ALOJADOR- Na lista são identificados com o endereço IP do nó de rede em q são executados.- Quando existe mais do que um Alojador disponível, os ficheiros devem ser distribuidos em round-robin- O CDD monitoriza uma pasta local onde são depositados os ficheiros a enviar, devem ser eliminados da pasta(dps de enviar), e se possivel mover para outra pasta- O  CDD recebe ficheiros do Cliente Emissor (assumindo assim papel servidor SDP2021)- Cada ficheiro é guardado numa pasta local para dps enviar para o ALOJADOR* Clientes emissores- Enviam ficheiros ao CDD- Assumem o papel de cliente SDP2021- Tem que saber o endereço de IP ou nome DNS do nó de rede q se encontra o CDD###SSL* Descrição do protocolo- Etapa 1: O cliente pede um a ligação segura com o Servidor.- Etapa 2: O Servidor envia a sua public key com o seu certificado de SLL (Definido pelo Certificate Authority).- Etapa 3: O Cliente recebe esses dados, e verifica com o Certificate Authority se esse certificado realmente é verdadeiro.- Etapa 4: Se o certificado for validado, é criado uma chave simétrica, para ter uma para sua posse e outra para enviar para o Servidor. Usa a public key do servidor para encriptar o segredo que ira ser enviado para o servidor.- Etapa 5: Quando o servidor recebe a chave encriptada, utiliza a sua chave privada para desincriptar e poder saber qual é a chave simétrica.- Etapa 6: Agora todas as comunicações entre o Servidor e o Cliente serão encriptadas e desincriptadas com a mesma chave.* Implementação- Iremos criar as classes necessárias para poder criar este protocolo de forma a proteger os dados entre eles enviados.- Utilização de código apresentado dado nas TP's.- Vamos ter que criar uma classe para definir a public key do servidor.- Como várias classes como "Centro de Distribuição" e "Alojadores" podem ser tanto como clientes e servidores terão de ter código para ambas as situações.# 3. Atribuição de sub-tarefas #Membros:  * 1190782 (José Soares) US04  * 1190811 (Lourenço Melo) US05  * 1191419 (José Maia) US02  * 1190718 (João Beires) US03# 4. Revisão individual final #* US2:- Finalizada parcialmente com alguns problemas;* Todo o código de SSL está comentado devido ao mau funcionamento de algumas funcionalidades do sprint anterior.* US3:- Finalizada parcialmente com alguns problemas;* Todo o código de SSL está comentado devido ao mau funcionamento de algumas funcionalidades do sprint anterior.* US4:- Finalizada parcialmente com alguns problemas;* Todo o código de SSL está comentado devido ao mau funcionamento de algumas funcionalidades do sprint anterior.* US5:- Finalizada parcialmente com alguns problemas;* Todo o código de SSL está comentado devido ao mau funcionamento de algumas funcionalidades do sprint anterior.